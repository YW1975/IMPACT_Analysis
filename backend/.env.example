# =============================================================================
# AI驱动软件开发效能管理平台 - 环境配置示例
# =============================================================================
# 复制此文件为 .env 并根据实际情况修改配置值

# =============================================================================
# 基础应用配置
# =============================================================================
APP_NAME="AI驱动软件开发效能管理平台"
APP_VERSION="1.0.0"
DESCRIPTION="基于AI的软件开发效能管理平台，实现VSM+框架的五个维度效能评估"
DEBUG=true
ENVIRONMENT=development
TIMEZONE="Asia/Shanghai"

# =============================================================================
# 服务器配置
# =============================================================================
HOST="127.0.0.1"
PORT=8000
WORKERS=1
RELOAD=true

# =============================================================================
# 安全配置
# =============================================================================
# 生成强密钥: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY="your-super-secret-key-change-this-in-production"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS配置
# =============================================================================
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173"
ALLOWED_METHODS="GET,POST,PUT,DELETE,OPTIONS"
ALLOWED_HEADERS="*"
ALLOW_CREDENTIALS=true

# =============================================================================
# 数据库配置
# =============================================================================
# PostgreSQL 数据库连接
DATABASE_URL="postgresql://username:password@localhost:5432/devops_platform"

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# Redis配置 (可选，用于缓存和会话)
# =============================================================================
REDIS_URL="redis://localhost:6379/0"
REDIS_PASSWORD=""
REDIS_DB=0
REDIS_MAX_CONNECTIONS=10

# =============================================================================
# AI服务配置
# =============================================================================
# OpenAI API配置
OPENAI_API_KEY="sk-your-openai-api-key-here"
OPENAI_MODEL="gpt-3.5-turbo"
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30

# AI服务配置
AI_ENABLED=true
AI_MOCK_MODE=false
AI_CACHE_TTL=3600

# =============================================================================
# 数据采集配置
# =============================================================================
# 数据采集总开关
DATA_COLLECTION_ENABLED=true
DATA_COLLECTION_INTERVAL=3600  # 秒
DATA_COLLECTION_BATCH_SIZE=100

# GitHub配置
GITHUB_ENABLED=true
GITHUB_TOKEN="ghp_your-github-personal-access-token"
GITHUB_ORG="your-organization"
GITHUB_REPOS="repo1,repo2,repo3"
GITHUB_API_URL="https://api.github.com"
GITHUB_TIMEOUT=30

# Jira配置
JIRA_ENABLED=true
JIRA_URL="https://your-company.atlassian.net"
JIRA_USERNAME="your-jira-username"
JIRA_API_TOKEN="your-jira-api-token"
JIRA_PROJECT_KEYS="PROJ1,PROJ2,PROJ3"
JIRA_TIMEOUT=30

# Jenkins配置
JENKINS_ENABLED=true
JENKINS_URL="http://your-jenkins-server:8080"
JENKINS_USERNAME="your-jenkins-username"
JENKINS_API_TOKEN="your-jenkins-api-token"
JENKINS_JOBS="job1,job2,job3"
JENKINS_TIMEOUT=30

# SonarQube配置 (可选)
SONARQUBE_ENABLED=false
SONARQUBE_URL="http://your-sonarqube-server:9000"
SONARQUBE_TOKEN="your-sonarqube-token"
SONARQUBE_PROJECTS="project1,project2"

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL="INFO"
LOG_FORMAT="json"  # json 或 text
LOG_FILE_ENABLED=true
LOG_FILE_PATH="logs/app.log"
LOG_FILE_MAX_SIZE="10 MB"
LOG_FILE_RETENTION="7 days"
LOG_FILE_ROTATION="daily"

# =============================================================================
# 缓存配置
# =============================================================================
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600  # 秒
CACHE_MAX_SIZE=1000
CACHE_METRICS_TTL=300
CACHE_INSIGHTS_TTL=1800

# =============================================================================
# 监控和健康检查配置
# =============================================================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
METRICS_PATH="/metrics"
HEALTH_CHECK_PATH="/health"

# =============================================================================
# 文件上传配置
# =============================================================================
UPLOAD_MAX_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_TYPES=".csv,.json,.xlsx,.txt"
UPLOAD_PATH="uploads/"

# =============================================================================
# 邮件配置 (可选，用于通知)
# =============================================================================
EMAIL_ENABLED=false
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USERNAME="your-email@gmail.com"
SMTP_PASSWORD="your-email-password"
SMTP_TLS=true
EMAIL_FROM="noreply@yourcompany.com"

# =============================================================================
# WebSocket配置
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_PATH="/ws"
WEBSOCKET_MAX_CONNECTIONS=100

# =============================================================================
# 任务队列配置 (Celery)
# =============================================================================
CELERY_ENABLED=false
CELERY_BROKER_URL="redis://localhost:6379/1"
CELERY_RESULT_BACKEND="redis://localhost:6379/2"
CELERY_TASK_SERIALIZER="json"
CELERY_RESULT_SERIALIZER="json"

# =============================================================================
# 第三方服务配置
# =============================================================================
# Slack通知 (可选)
SLACK_ENABLED=false
SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
SLACK_CHANNEL="#devops-alerts"

# 钉钉通知 (可选)
DINGTALK_ENABLED=false
DINGTALK_WEBHOOK_URL="https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN"
DINGTALK_SECRET="your-dingtalk-secret"

# 企业微信通知 (可选)
WECOM_ENABLED=false
WECOM_WEBHOOK_URL="https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY"

# =============================================================================
# 开发和调试配置
# =============================================================================
# 开发模式配置
DEV_MODE=true
DEV_RELOAD_DIRS="app"
DEV_RELOAD_INCLUDES="*.py"
DEV_RELOAD_EXCLUDES="*.pyc,*.pyo,*~"

# 调试配置
DEBUG_SQL=false
DEBUG_REQUESTS=false
DEBUG_RESPONSES=false

# 测试配置
TEST_DATABASE_URL="postgresql://username:password@localhost:5432/devops_platform_test"
TEST_REDIS_URL="redis://localhost:6379/15"

# =============================================================================
# 性能配置
# =============================================================================
# API限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # 秒

# 请求超时配置
REQUEST_TIMEOUT=30
API_TIMEOUT=30
DB_TIMEOUT=30

# =============================================================================
# 安全增强配置
# =============================================================================
# HTTPS配置
HTTPS_ONLY=false
SSL_CERT_PATH=""
SSL_KEY_PATH=""

# 安全头配置
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'"

# =============================================================================
# 备份和恢复配置
# =============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_PATH="backups/"

# =============================================================================
# 国际化配置
# =============================================================================
DEFAULT_LANGUAGE="zh-CN"
SUPPORTED_LANGUAGES="zh-CN,en-US"
TIMEZONE_AWARE=true

# =============================================================================
# 特性开关
# =============================================================================
FEATURE_AI_CHAT=true
FEATURE_REAL_TIME_ANALYTICS=true
FEATURE_PREDICTIVE_ANALYSIS=true
FEATURE_CUSTOM_METRICS=true
FEATURE_TEAM_COMPARISON=true
FEATURE_EXPORT_REPORTS=true
FEATURE_WEBHOOK_NOTIFICATIONS=true

# =============================================================================
# 注意事项
# =============================================================================
# 1. 生产环境请务必修改所有密钥和密码
# 2. 确保数据库和Redis服务正常运行
# 3. 根据实际情况调整连接池和缓存配置
# 4. 定期备份重要数据
# 5. 监控系统资源使用情况